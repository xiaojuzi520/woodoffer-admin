(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-offer-add"],{"36f1":function(t,e,n){"use strict";(function(t){var i=n("4ea4");n("caad"),n("d81d"),n("d3b7"),n("2532"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;i(n("614e"));var o=t.database(),a=(o.command,"uni-id-product");var r={components:{},data:function(){var t=this;this.$createElement;return{formData:{name:"",desc:"",imgUrls:[],price:"",status:1},formOptions:[{type:"input",formItem:{label:"产品名称",prop:"name",rules:[this.$rules.required("请输入产品名称")]}},{type:"input",formItem:{label:"价格",prop:"price",rules:[this.$rules.required("请输入产品价格")]},attrs:{type:"number"}},{type:"custom",formItem:{label:"图片",prop:"imgUrls",rules:[{required:!0,validator:function(e,n,i){t.formData.imgUrls.length?i():i(new Error("请上传图片"))},trigger:["blur","change"]}]},component:{props:{value:{type:Array,default:function(){return[]}}},data:function(){return{}},render:function(t){var e=this,n=function(t){e.$emit("input",t)};return t("div",[t("xl-img-upload",{attrs:{value:this.value,multiple:!0,limit:4},on:{change:n}})])}}},{type:"richText",formItem:{label:"产品描述",prop:"desc",rules:[this.$rules.required("请输入产品描述")]}},{type:"switch",formItem:{label:"是否启用",prop:"status"},attrs:{"active-value":1,"inactive-value":0}}],data:{}}},onLoad:function(t){if(t&&t.id){console.log(t);var e=t.id;this.formDataId=e,this.getDetail(e)}},methods:{submitForm:function(){var t=this;this.$refs.form.validate((function(){t.submit()}))},getDetail:function(t){var e=this;uni.showLoading({mask:!0}),o.collection(a).doc(t).get().then((function(t){var n;e.formData=null===(n=t.result.data)||void 0===n?void 0:n[0]})).catch((function(t){uni.showModal({content:t.message||"请求服务失败",showCancel:!1})})).finally((function(){uni.hideLoading()}))},onSuccess:function(t){this.$message.success("上传成功"),console.log("上传成功",t),console.log(t)},onError:function(t){console.error("上传失败",t)},onUpload:function(t,e){var n=e.next;e.done;console.log("上传钩子",t),n()},onRemove:function(t,e){var n=e.next;console.log("删除钩子",t),n(t)},submit:function(){uni.showLoading({title:"提交中...",mask:!0}),o.collection(a).add(this.formData).then((function(t){uni.showToast({title:"新增成功"}),uni.navigateBack()})).catch((function(t){uni.showModal({content:t.message||"请求服务失败",showCancel:!1})})).finally((function(){uni.hideLoading()}))},loadPermissions:function(){var t=this;o.collection("uni-id-permissions").limit(500).get().then((function(e){t.permissions=e.result.data.map((function(t){return{value:t.permission_id,text:t.permission_name}}))})).catch((function(t){uni.showModal({title:"提示",content:t.message,showCancel:!1})}))}}};e.default=r}).call(this,n("a9ff")["default"])},"614e":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={role_id:{rules:[{required:!0,errorMessage:"{label}必填"},{format:"string"}],label:"角色Id"},role_name:{rules:[{required:!0,errorMessage:"{label}必填"},{format:"string"}],label:"角色名"},permission:{rules:[{format:"array"}],label:"权限"},comment:{rules:[{format:"string"}],label:"备注"}};e.default=i},"89c6":function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"uni-container"},[n("xl-form",{ref:"form",attrs:{"form-data":t.formData,"form-options":t.formOptions}}),n("v-uni-view",{staticClass:"uni-button-group"},[n("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submitForm.apply(void 0,arguments)}}},[t._v("提交")]),n("v-uni-navigator",{staticStyle:{"margin-left":"15px"},attrs:{"open-type":"navigateBack"}},[n("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"}},[t._v("返回")])],1)],1)],1)},a=[]},bffc:function(t,e,n){"use strict";n.r(e);var i=n("36f1"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},c04e5:function(t,e,n){"use strict";n.r(e);var i=n("89c6"),o=n("bffc");for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);var r,s=n("f0c5"),u=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);e["default"]=u.exports}}]);