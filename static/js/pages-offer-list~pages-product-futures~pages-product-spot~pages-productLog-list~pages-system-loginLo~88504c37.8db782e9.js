(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-offer-list~pages-product-futures~pages-product-spot~pages-productLog-list~pages-system-loginLo~88504c37"],{"11d2":function(e,t,n){"use strict";n.r(t);var a=n("9b17"),o=n("9a4a"),i=n("52fd"),r=n("e0e4"),s=n("68f3");t["default"]={en:a,es:o,fr:i,"zh-Hans":r,"zh-Hant":s}},"4af1":function(e,t,n){"use strict";(function(e){var a=n("4ea4");n("4160"),n("c975"),n("fb6a"),n("a434"),n("a9e3"),n("b64b"),n("d3b7"),n("ac1f"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("2909")),i=n("78b5"),r=a(n("11d2")),s=(0,i.initVueI18n)(r.default),c=s.t,u={load:"load",error:"error"},l={add:"add",replace:"replace"},d={auto:"auto",onready:"onready",manual:"manual"},f=["pageCurrent","pageSize","collection","action","field","getcount","orderby","where","groupby","groupField","distinct"],h={name:"UniClouddb",props:{options:{type:[Object,Array],default:function(){return{}}},collection:{type:String,default:""},action:{type:String,default:""},field:{type:String,default:""},orderby:{type:String,default:""},where:{type:[String,Object],default:""},pageData:{type:String,default:"add"},pageCurrent:{type:Number,default:1},pageSize:{type:Number,default:20},getcount:{type:[Boolean,String],default:!1},getone:{type:[Boolean,String],default:!1},gettree:{type:[Boolean,String,Object],default:!1},gettreepath:{type:[Boolean,String],default:!1},startwith:{type:String,default:""},limitlevel:{type:Number,default:10},groupby:{type:String,default:""},groupField:{type:String,default:""},distinct:{type:[Boolean,String],default:!1},pageIndistinct:{type:[Boolean,String],default:!1},foreignKey:{type:String,default:""},loadtime:{type:String,default:"auto"},manual:{type:Boolean,default:!1}},data:function(){return{loading:!1,hasMore:!1,dataList:this.getone?void 0:[],paginationInternal:{},errorMessage:""}},created:function(){var e=this;this._isEnded=!1,this.paginationInternal={current:this.pageCurrent,size:this.pageSize,count:0},this.$watch((function(){var t=[];return f.forEach((function(n){t.push(e[n])})),t}),(function(t,n){if(e.loadtime!==d.manual){e.paginationInternal.size=e.pageSize;for(var a=!1,o=2;o<t.length;o++)if(t[o]!==n[o]){a=!0;break}a&&(e.clear(),e.reset()),t[0]!==n[0]&&(e.paginationInternal.current=e.pageCurrent),e._execLoadData()}})),this.manual||this.loadtime!==d.auto||this.loadData()},beforeDestroy:function(){},methods:{loadData:function(e,t){var n=null,a=!1;"object"===typeof e?(e.clear&&(this.pageData===l.replace?this.clear():a=e.clear,this.reset()),void 0!==e.current&&(this.paginationInternal.current=e.current),"function"===typeof t&&(n=t)):"function"===typeof e&&(n=e),this._execLoadData(n,a)},loadMore:function(){this._isEnded||this.loading||(this.pageData===l.add&&this.paginationInternal.current++,this._execLoadData())},refresh:function(){this.clear(),this._execLoadData()},clear:function(){this._isEnded=!1,this.dataList=[]},reset:function(){this.paginationInternal.current=1},add:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.action,o=n.showToast,i=void 0===o||o,r=n.toastTitle,s=n.success,u=n.fail,l=n.complete,d=n.needConfirm,f=void 0===d||d,h=n.needLoading,p=void 0===h||h,g=n.loadingTitle,m=void 0===g?"":g;p&&uni.showLoading({title:m});var v=e.database();a&&(v=v.action(a)),v.collection(this._getCollection()).add(t).then((function(e){s&&s(e),i&&uni.showToast({title:r||c("uniCloud.component.add.success")})})).catch((function(e){u&&u(e),f&&uni.showModal({content:e.message,showCancel:!1})})).finally((function(){p&&uni.hideLoading(),l&&l()}))},remove:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.action,o=n.success,i=n.fail,r=n.complete,s=n.confirmTitle,u=n.confirmContent,l=n.needConfirm,d=void 0===l||l,f=n.needLoading,h=void 0===f||f,p=n.loadingTitle,g=void 0===p?"":p;e&&e.length&&(d?uni.showModal({title:s||c("uniCloud.component.remove.showModal.title"),content:u||c("uniCloud.component.remove.showModal.content"),showCancel:!0,success:function(n){n.confirm&&t._execRemove(e,a,o,i,r,d,h,g)}}):this._execRemove(e,a,o,i,r,d,h,g))},update:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.action,i=a.showToast,r=void 0===i||i,s=a.toastTitle,u=a.success,l=a.fail,d=a.complete,f=a.needConfirm,h=void 0===f||f,p=a.needLoading,g=void 0===p||p,m=a.loadingTitle,v=void 0===m?"":m;g&&uni.showLoading({title:v});var b=e.database();return o&&(b=b.action(o)),b.collection(this._getCollection()).doc(t).update(n).then((function(e){u&&u(e),r&&uni.showToast({title:s||c("uniCloud.component.update.success")})})).catch((function(e){l&&l(e),h&&uni.showModal({content:e.message,showCancel:!1})})).finally((function(){g&&uni.hideLoading(),d&&d()}))},getTemp:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=e.database();this.action&&(n=n.action(this.action)),n=n.collection(this.collection),this.where&&Object.keys(this.where).length&&(n=n.where(this.where)),this.field&&(n=n.field(this.field)),this.foreignKey&&(n=n.foreignKey(this.foreignKey)),this.groupby&&(n=n.groupBy(this.groupby)),this.groupField&&(n=n.groupField(this.groupField)),!0===this.distinct&&(n=n.distinct()),this.orderby&&(n=n.orderBy(this.orderby));var a=this.paginationInternal,o=a.current,i=a.size,r={};this.getcount&&(r.getCount=this.getcount);var s={limitLevel:this.limitlevel,startWith:this.startwith};return this.gettree&&(r.getTree=s),this.gettreepath&&(r.getTreePath=s),n=n.skip(i*(o-1)).limit(i),t?(n=n.getTemp(r),n.udb=this):n=n.get(r),n},setResult:function(e){0===e.code?this._execLoadDataSuccess(e):this._execLoadDataFail(new Error(e.message))},_execLoadData:function(e,t){var n=this;this.loading||(this.loading=!0,this.errorMessage="",this._getExec().then((function(a){n.loading=!1,n._execLoadDataSuccess(a.result,e,t)})).catch((function(t){n.loading=!1,n._execLoadDataFail(t,e)})))},_execLoadDataSuccess:function(e,t,n){var a=e.data,i=e.count;this._isEnded=void 0!==i?this.paginationInternal.current*this.paginationInternal.size>=i:a.length<this.pageSize,this.hasMore=!this._isEnded;var r,s=this.getone?a.length?a[0]:void 0:a;(this.getcount&&(this.paginationInternal.count=i),t&&t(s,this._isEnded,this.paginationInternal),this._dispatchEvent(u.load,s),this.getone||this.pageData===l.replace)?this.dataList=s:n?this.dataList=s:(r=this.dataList).push.apply(r,(0,o.default)(s))},_execLoadDataFail:function(e,t){this.errorMessage=e,t&&t(),this.$emit(u.error,e)},_getExec:function(){return this.getTemp(!1)},_execRemove:function(t,n,a,o,i,r,s,c){var u=this;if(this.collection&&t){var d=Array.isArray(t)?t:[t];if(d.length){s&&uni.showLoading({mask:!0,title:c});var f=e.database(),h=f.command,p=f;n&&(p=p.action(n)),p.collection(this._getCollection()).where({_id:h.in(d)}).remove().then((function(e){a&&a(e.result),u.pageData===l.replace?u.refresh():u.removeData(d)})).catch((function(e){o&&o(e),r&&uni.showModal({content:e.message,showCancel:!1})})).finally((function(){s&&uni.hideLoading(),i&&i()}))}}},_getCollection:function(){var e=this.collection.indexOf(","),t=e>0?this.collection.substring(0,e):this.collection;return t},removeData:function(e){for(var t=e.slice(0),n=this.dataList,a=n.length-1;a>=0;a--){var o=t.indexOf(n[a]._id);o>=0&&(n.splice(a,1),t.splice(o,1))}},_dispatchEvent:function(e,t){this._changeDataFunction?this._changeDataFunction(t,this._isEnded,this.paginationInternal):this.$emit(e,t,this._isEnded,this.paginationInternal)}}};t.default=h}).call(this,n("a9ff")["default"])},"52fd":function(e){e.exports=JSON.parse('{"uniCloud.component.add.success":"新增成功","uniCloud.component.update.success":"修改成功","uniCloud.component.remove.showModal.title":"提示","uniCloud.component.remove.showModal.content":"是否删除该数据"}')},"5b0b":function(e,t,n){"use strict";n.r(t);var a=n("fd6a"),o=n.n(a);for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=o.a},"5e17":function(e,t,n){"use strict";var a;n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[e._t("default",null,{options:e.options,data:e.dataList,pagination:e.paginationInternal,loading:e.loading,hasMore:e.hasMore,error:e.errorMessage})],2)},i=[]},"68f3":function(e){e.exports=JSON.parse('{"uniCloud.component.add.success":"新增成功","uniCloud.component.update.success":"修改成功","uniCloud.component.remove.showModal.title":"提示","uniCloud.component.remove.showModal.content":"是否刪除數據"}')},"848e":function(e,t,n){"use strict";n.r(t);var a=n("4af1"),o=n.n(a);for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=o.a},"960d":function(e,t,n){"use strict";n.r(t);var a=n("5e17"),o=n("848e");for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var r,s=n("f0c5"),c=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],r);t["default"]=c.exports},"9a4a":function(e){e.exports=JSON.parse('{"uniCloud.component.add.success":"新增成功","uniCloud.component.update.success":"修改成功","uniCloud.component.remove.showModal.title":"提示","uniCloud.component.remove.showModal.content":"是否删除该数据"}')},"9b0c":function(e,t,n){var a,o,i;n("c975"),n("ace4"),n("d3b7"),n("ac1f"),n("3ca3"),n("5319"),n("1276"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd0"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("ddb0"),n("2b3d"),function(n,r){o=[],a=r,i="function"===typeof a?a.apply(t,o):a,void 0===i||(e.exports=i)}(0,(function(){return function e(t,n,a){var o,i,r=window,s="application/octet-stream",c=a||s,u=t,l=!n&&!a&&u,d=document.createElement("a"),f=function(e){return String(e)},h=r.Blob||r.MozBlob||r.WebKitBlob||f,p=n||"download";if(h=h.call?h.bind(r):Blob,"true"===String(this)&&(u=[u,c],c=u[0],u=u[1]),l&&l.length<2048&&(p=l.split("/").pop().split("?")[0],d.href=l,-1!==d.href.indexOf(l))){var g=new XMLHttpRequest;return g.open("GET",l,!0),g.responseType="blob",g.onload=function(t){e(t.target.response,p,s)},setTimeout((function(){g.send()}),0),g}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(u)){if(!(u.length>2096103.424&&h!==f))return navigator.msSaveBlob?navigator.msSaveBlob(y(u),p):w(u);u=y(u),c=u.type||s}else if(/([\x80-\xff])/.test(u)){var m=0,v=new Uint8Array(u.length),b=v.length;for(m;m<b;++m)v[m]=u.charCodeAt(m);u=new h([v],{type:c})}function y(e){var t=e.split(/[:;,]/),n=t[1],a="base64"==t[2]?atob:decodeURIComponent,o=a(t.pop()),i=o.length,r=0,s=new Uint8Array(i);for(r;r<i;++r)s[r]=o.charCodeAt(r);return new h([s],{type:n})}function w(e,t){if("download"in d)return d.href=e,d.setAttribute("download",p),d.className="download-js-link",d.innerHTML="downloading...",d.style.display="none",document.body.appendChild(d),setTimeout((function(){d.click(),document.body.removeChild(d),!0===t&&setTimeout((function(){r.URL.revokeObjectURL(d.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var n=document.createElement("iframe");document.body.appendChild(n),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s)),n.src=e,setTimeout((function(){document.body.removeChild(n)}),333)}if(o=u instanceof h?u:new h([u],{type:c}),navigator.msSaveBlob)return navigator.msSaveBlob(o,p);if(r.URL)w(r.URL.createObjectURL(o),!0);else{if("string"===typeof o||o.constructor===f)try{return w("data:"+c+";base64,"+r.btoa(o))}catch(x){return w("data:"+c+","+encodeURIComponent(o))}i=new FileReader,i.onload=function(e){w(this.result)},i.readAsDataURL(o)}return!0}}))},"9b17":function(e){e.exports=JSON.parse('{"uniCloud.component.add.success":"Success","uniCloud.component.update.success":"Success","uniCloud.component.remove.showModal.title":"Tips","uniCloud.component.remove.showModal.content":"是否删除该数据"}')},a1c6:function(e,t,n){"use strict";var a;n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:e.idName},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.generate.apply(void 0,arguments)}}},[e._t("default",[e._v("Download "+e._s(e.name))])],2)},i=[]},e0e4:function(e){e.exports=JSON.parse('{"uniCloud.component.add.success":"新增成功","uniCloud.component.update.success":"修改成功","uniCloud.component.remove.showModal.title":"提示","uniCloud.component.remove.showModal.content":"是否删除该数据"}')},f17b:function(e,t,n){"use strict";n.r(t);var a=n("a1c6"),o=n("5b0b");for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var r,s=n("f0c5"),c=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],r);t["default"]=c.exports},fd6a:function(e,t,n){"use strict";var a=n("4ea4");n("a15b"),n("d81d"),n("ace4"),n("b64b"),n("d3b7"),n("ac1f"),n("466d"),n("5319"),n("1276"),n("2ca0"),n("8a59"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd0"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("b85c"));n("96cf");var i=a(n("1da1")),r=a(n("9b0c")),s={name:"downloadExcel",props:{type:{type:String,default:"xls"},data:{type:Array,required:!1,default:null},fields:{type:Object,default:function(){return null}},exportFields:{type:Object,default:function(){return null}},defaultValue:{type:String,required:!1,default:""},header:{default:null},footer:{default:null},name:{type:String,default:"data.xls"},fetch:{type:Function},meta:{type:Array,default:function(){return[]}},worksheet:{type:String,default:"Sheet1"},beforeGenerate:{type:Function},beforeFinish:{type:Function},escapeCsv:{type:Boolean,default:!0},stringifyLongNum:{type:Boolean,default:!1}},computed:{idName:function(){var e=(new Date).getTime();return"export_"+e},downloadFields:function(){return this.fields?this.fields:this.exportFields?this.exportFields:void 0}},methods:{generate:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("function"!==typeof e.beforeGenerate){t.next=3;break}return t.next=3,e.beforeGenerate();case 3:if(n=e.data,"function"!==typeof e.fetch&&n){t.next=8;break}return t.next=7,e.fetch();case 7:n=t.sent;case 8:if(n&&n.length){t.next=10;break}return t.abrupt("return");case 10:if(a=e.getProcessedJson(n,e.downloadFields),"html"!==e.type){t.next=15;break}return t.abrupt("return",e.export(e.jsonToXLS(a),e.name.replace(".xls",".html"),"text/html"));case 15:if("csv"!==e.type){t.next=17;break}return t.abrupt("return",e.export(e.jsonToCSV(a),e.name.replace(".xls",".csv"),"application/csv"));case 17:return t.abrupt("return",e.export(e.jsonToXLS(a),e.name,"application/vnd.ms-excel"));case 18:case"end":return t.stop()}}),t)})))()},export:function(){var e=(0,i.default)(regeneratorRuntime.mark((function e(t,n,a){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=this.base64ToBlob(t,a),"function"!==typeof this.beforeFinish){e.next=4;break}return e.next=4,this.beforeFinish();case 4:(0,r.default)(o,n,a);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,a){return e.apply(this,arguments)}return t}(),jsonToXLS:function(e){var t='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><meta name=ProgId content=Excel.Sheet> <meta name=Generator content="Microsoft Excel 11"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>${worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e<style scoped>br {mso-data-placement: same-cell;}</style></head><body><table>${table}</table></body></html>',n="<thead>",a=Object.keys(e[0]).length,o=this,i=this.header||this.$attrs.title;for(var r in i&&(n+=this.parseExtraData(i,'<tr><th colspan="'+a+'">${data}</th></tr>')),n+="<tr>",e[0])n+="<th>"+r+"</th>";return n+="</tr>",n+="</thead>",n+="<tbody>",e.map((function(e,t){for(var a in n+="<tr>",e)n+="<td>"+o.preprocessLongNum(o.valueReformattedForMultilines(e[a]))+"</td>";n+="</tr>"})),n+="</tbody>",null!=this.footer&&(n+="<tfoot>",n+=this.parseExtraData(this.footer,'<tr><td colspan="'+a+'">${data}</td></tr>'),n+="</tfoot>"),t.replace("${table}",n).replace("${worksheet}",this.worksheet)},jsonToCSV:function(e){var t=this,n=[],a=this.header||this.$attrs.title;for(var o in a&&n.push(this.parseExtraData(a,"${data}\r\n")),e[0])n.push(o),n.push(",");return n.pop(),n.push("\r\n"),e.map((function(e){for(var a in e){var o=e[a]+"";t.escapeCsv&&(o='="'+o+'"',o.match(/[,"\n]/)&&(o='"'+o.replace(/\"/g,'""')+'"')),n.push(o),n.push(",")}n.pop(),n.push("\r\n")})),null!=this.footer&&n.push(this.parseExtraData(this.footer,"${data}\r\n")),n.join("")},getProcessedJson:function(e,t){var n=this.getKeys(e,t),a=[],o=this;return e.map((function(e,t){var i={};for(var r in n){var s=n[r];i[r]=o.getValue(s,e)}a.push(i)})),a},getKeys:function(e,t){if(t)return t;var n={};for(var a in e[0])n[a]=a;return n},parseExtraData:function(e,t){var n="";if(Array.isArray(e))for(var a=0;a<e.length;a++)e[a]&&(n+=t.replace("${data}",e[a]));else n+=t.replace("${data}",e);return n},getValue:function(e,t){var n="object"!==typeof e?e:e.field,a="string"!==typeof n?[]:n.split("."),o=this.defaultValue;return o=n?a.length>1?this.getValueFromNestedItem(t,a):this.parseValue(t[n]):t,e.hasOwnProperty("callback")&&(o=this.getValueFromCallback(o,e.callback)),o},valueReformattedForMultilines:function(e){return"string"==typeof e?e.replace(/\n/gi,"<br/>"):e},preprocessLongNum:function(e){if(this.stringifyLongNum){if(String(e).startsWith("0x"))return e;if(!isNaN(e)&&""!=e&&(e>99999999999||e<1e-13))return'="'+e+'"'}return e},getValueFromNestedItem:function(e,t){var n,a=e,i=(0,o.default)(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;a&&(a=a[r])}}catch(s){i.e(s)}finally{i.f()}return this.parseValue(a)},getValueFromCallback:function(e,t){if("function"!==typeof t)return this.defaultValue;var n=t(e);return this.parseValue(n)},parseValue:function(e){return e||0===e||"boolean"===typeof e?e:this.defaultValue},base64ToBlob:function(e,t){var n=window.btoa(window.unescape(encodeURIComponent(e))),a=atob(n),o=a.length,i=new Uint8ClampedArray(o);while(o--)i[o]=a.charCodeAt(o);return new Blob([i],{type:t})}}};t.default=s}}]);